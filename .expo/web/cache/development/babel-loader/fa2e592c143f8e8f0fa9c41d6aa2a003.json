{"ast":null,"code":"\"use strict\";\n\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport MapView, { Callout, Marker } from 'react-native-maps';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Map = function Map() {\n  var _React$useState = React.useState({\n    latitude: 37.78825,\n    longitude: -122.4324\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      pin = _React$useState2[0],\n      setPin = _React$useState2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      litters = _useState2[0],\n      setLitters = _useState2[1];\n\n  useEffect(function () {\n    axios.get(\"http://178.18.252.126:1337/litters\").then(function (response) {\n      setLitters(response.data);\n    });\n  }, []);\n\n  var generateMarkers = function generateMarkers() {\n    return litters.map(function (litter, key) {\n      var url = \"\";\n\n      if (litter.sobadtosee && litter.sobadtosee[0]) {\n        url = \"http://178.18.252.126:1337\" + litter.sobadtosee[0].formats.large.url;\n      }\n\n      var coordinate = litter.coordinates.split(\",\");\n      console.log(url);\n      return _jsx(Marker, {\n        coordinate: {\n          latitude: coordinate[0],\n          longitude: coordinate[1]\n        },\n        draggable: true,\n        onDragStart: function onDragStart(event) {\n          console.log(\"Drag start\", event.nativeEvent.coordinate);\n        },\n        children: _jsxs(Callout, {\n          children: [_jsx(Text, {\n            children: litter.type + \"Hello\"\n          }), _jsx(Image, {\n            source: {\n              uri: url\n            },\n            style: {\n              width: 300,\n              height: 300\n            }\n          })]\n        })\n      }, key);\n    });\n  };\n\n  return _jsxs(View, {\n    style: styles.map2,\n    children: [_jsx(GooglePlacesAutocomplete, {\n      placeholder: \"Search\",\n      fetchDetails: true,\n      GooglePlacesSearchQuery: {\n        rankby: \"distance\"\n      },\n      onPress: function onPress(data) {\n        var details = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        console.log(data, details);\n      },\n      query: {\n        key: 'AIzaSyAK9Zksgh9T5vQwL-vdarMtP-mAd9Cqz2U',\n        language: 'en',\n        type: 'establishment'\n      },\n      styles: {\n        container: {\n          flex: 0,\n          position: 'absolute',\n          width: '100%',\n          zIndex: 1\n        },\n        listView: {\n          backgroundColor: \"white\"\n        }\n      }\n    }), _jsxs(MapView, {\n      style: styles.map,\n      showsUserLocation: true,\n      userLocationFastestInterval: 5000,\n      initialRegion: {\n        latitude: 37.78825,\n        longitude: -122.4324,\n        latitudeDelta: 0.0922,\n        longitudeDelta: 0.0421\n      },\n      provider: \"google\",\n      children: [generateMarkers(), _jsx(Marker, {\n        coordinate: pin,\n        draggable: true,\n        onDragStart: function onDragStart(event) {\n          console.log(\"Drag start\", event.nativeEvent.coordinate);\n        },\n        onDragEnd: function onDragEnd(event) {\n          setPin({\n            latitude: event.nativeEvent.coordinate.latitude,\n            longitude: event.nativeEvent.coordinate.longitude\n          });\n        },\n        children: _jsx(Callout, {\n          children: _jsx(Text, {\n            children: \" You are here\"\n          })\n        })\n      })]\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  map: {\n    width: Dimensions.get('window').width,\n    height: Dimensions.get('window').height\n  },\n  map2: {\n    flex: 1,\n    marginTop: 0\n  }\n});\nexport default Map;","map":{"version":3,"sources":["C:/Users/DCV/Documents/ReactNativeProjekt/EarthCrew/src/screens/menu/Map.js"],"names":["React","useEffect","useState","MapView","Callout","Marker","GooglePlacesAutocomplete","axios","Map","latitude","longitude","pin","setPin","litters","setLitters","get","then","response","data","generateMarkers","map","litter","key","url","sobadtosee","formats","large","coordinate","coordinates","split","console","log","event","nativeEvent","type","uri","width","height","styles","map2","rankby","details","language","container","flex","position","zIndex","listView","backgroundColor","latitudeDelta","longitudeDelta","StyleSheet","create","alignItems","justifyContent","Dimensions","marginTop"],"mappings":"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","sourcesContent":["\"use strict\"\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport MapView, { Callout, Marker } from 'react-native-maps';\r\nimport { StyleSheet, Text, View, Dimensions, Image } from 'react-native';\r\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\r\nimport axios from 'axios';\r\n\r\n\r\nconst Map = () => {\r\n    const [pin, setPin] = React.useState({\r\n        latitude: 37.78825,\r\n        longitude: -122.4324\r\n    })\r\n\r\n    const [litters, setLitters] = useState([])\r\n\r\n    useEffect(() => {\r\n        //load litters\r\n        // set state \r\n        axios.get(\"http://178.18.252.126:1337/litters\").then((response) => {\r\n            setLitters(response.data);\r\n        })\r\n    }, [])\r\n\r\n\r\n    const generateMarkers = () => {\r\n        return litters.map((litter, key) => {\r\n            let url = \"\";\r\n            if (litter.sobadtosee && litter.sobadtosee[0]) {\r\n                url = \"http://178.18.252.126:1337\" + litter.sobadtosee[0].formats.large.url;\r\n            }\r\n            const coordinate = litter.coordinates.split(\",\");\r\n            console.log(url)\r\n            return <Marker\r\n                key={key}\r\n                coordinate={{\r\n                    latitude: coordinate[0],\r\n                    longitude: coordinate[1]\r\n                }}\r\n                draggable={true}\r\n                onDragStart={(event) => {\r\n                    console.log(\"Drag start\", event.nativeEvent.coordinate)\r\n                }}\r\n            >\r\n                <Callout>\r\n                    <Text>{litter.type + \"Hello\"}</Text>\r\n                    <Image source={{ uri: url }} style={{ width: 300, height: 300 }} />\r\n                </Callout>\r\n            </Marker>\r\n        })\r\n    }\r\n\r\n    return (\r\n        <View style={styles.map2} >\r\n            <GooglePlacesAutocomplete\r\n                placeholder='Search'\r\n                fetchDetails={true}\r\n                GooglePlacesSearchQuery={{\r\n                    rankby: \"distance\"\r\n                }}\r\n                onPress={(data, details = null) => {\r\n                    // 'details' is provided when fetchDetails = true\r\n                    console.log(data, details);\r\n                }}\r\n                query={{\r\n                    key: 'AIzaSyAK9Zksgh9T5vQwL-vdarMtP-mAd9Cqz2U',\r\n                    language: 'en',\r\n                    type: 'establishment'\r\n                }}\r\n                styles={{\r\n                    container: {\r\n                        flex: 0,\r\n                        position: 'absolute',\r\n                        width: '100%',\r\n                        zIndex: 1,\r\n                    },\r\n                    listView: { backgroundColor: \"white\" }\r\n                }}\r\n            />\r\n            <MapView\r\n                style={styles.map}\r\n                showsUserLocation\r\n                userLocationFastestInterval={5000}\r\n                initialRegion={{\r\n                    latitude: 37.78825,\r\n                    longitude: -122.4324,\r\n                    latitudeDelta: 0.0922,\r\n                    longitudeDelta: 0.0421,\r\n                }}\r\n                provider='google'>\r\n                {generateMarkers()}\r\n                <Marker\r\n                    coordinate={pin}\r\n                    draggable={true}\r\n                    onDragStart={(event) => {\r\n                        console.log(\"Drag start\", event.nativeEvent.coordinate)\r\n                    }}\r\n                    onDragEnd={(event) => {\r\n                        setPin({\r\n                            latitude: event.nativeEvent.coordinate.latitude,\r\n                            longitude: event.nativeEvent.coordinate.longitude\r\n                        })\r\n                    }}>\r\n                    <Callout>\r\n                        <Text> You are here</Text>\r\n                    </Callout>\r\n                </Marker>\r\n            </MapView>\r\n        </View >\r\n    );\r\n\r\n}\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#fff',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    map: {\r\n        width: Dimensions.get('window').width,\r\n        height: Dimensions.get('window').height,\r\n    },\r\n    map2: {\r\n        flex: 1,\r\n        marginTop: 0\r\n    }\r\n});\r\n\r\nexport default Map;"]},"metadata":{},"sourceType":"module"}