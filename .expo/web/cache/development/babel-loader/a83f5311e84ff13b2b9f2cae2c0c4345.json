{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport UserModel from \"../../../app/models/UserModel\";\nimport { Headline, Paragraph, TextInput, Button, Snackbar, Portal } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Login = function Login(props) {\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      identifier = _React$useState2[0],\n      setIdentifier = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      password = _React$useState4[0],\n      setPassword = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      visible = _React$useState6[0],\n      setVisible = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      loading = _React$useState8[0],\n      setLoading = _React$useState8[1];\n\n  var _React$useState9 = React.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      error = _React$useState10[0],\n      setError = _React$useState10[1];\n\n  var validateInput = function validateInput() {\n    var errors = false;\n\n    if (!identifier || identifier.length === 0) {\n      errors = true;\n    }\n\n    if (!password || password.length === 0) {\n      errors = true;\n    }\n\n    return !errors;\n  };\n\n  var authenticateUser = function authenticateUser() {\n    var user;\n    return _regeneratorRuntime.async(function authenticateUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!validateInput()) {\n              _context.next = 15;\n              break;\n            }\n\n            setLoading(true);\n            user = new UserModel(identifier, password);\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(user.login());\n\n          case 6:\n            _context.next = 13;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](3);\n            setError(_context.t0.message);\n            setVisible(true);\n            setLoading(false);\n\n          case 13:\n            _context.next = 18;\n            break;\n\n          case 15:\n            setError('Please fill out all *required fields');\n            setVisible(true);\n            setLoading(false);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 8]], Promise);\n  };\n\n  return _jsxs(View, {\n    style: styles.base,\n    children: [_jsx(_Fragment, {\n      children: _jsx(StatusBar, {\n        backgroundColor: \"#ffffff\",\n        barStyle: \"dark-content\"\n      })\n    }), _jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Headline, {\n        style: styles.appTitle,\n        children: \"EarthCrew\"\n      }), _jsx(Paragraph, {\n        style: styles.appDesc,\n        children: \"Authenticate with strapi to access the EarthCrew.\"\n      })]\n    }), _jsxs(_Fragment, {\n      children: [_jsx(View, {\n        style: styles.divider\n      }), _jsx(TextInput, {\n        onChangeText: function onChangeText(text) {\n          return setIdentifier(text);\n        },\n        label: \"*Username or email\",\n        placeholder: \"*Username or email\",\n        children: identifier\n      })]\n    }), _jsxs(_Fragment, {\n      children: [_jsx(View, {\n        style: styles.divider\n      }), _jsx(TextInput, {\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        },\n        label: \"*Password\",\n        placeholder: \"*Password\",\n        secureTextEntry: true,\n        children: password\n      })]\n    }), _jsxs(_Fragment, {\n      children: [_jsx(View, {\n        style: styles.divider\n      }), _jsx(Button, {\n        loading: loading,\n        disabled: loading,\n        style: styles.btn,\n        onPress: function onPress() {\n          return authenticateUser();\n        },\n        mode: \"contained\",\n        children: \"Login\"\n      }), _jsx(View, {\n        style: styles.divider\n      }), _jsx(View, {\n        style: styles.divider\n      })]\n    }), _jsx(_Fragment, {\n      children: _jsx(Portal, {\n        children: _jsx(Snackbar, {\n          visible: visible,\n          onDismiss: function onDismiss() {\n            return setVisible(false);\n          },\n          children: error\n        })\n      })\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  base: {\n    flex: 1,\n    paddingLeft: 16,\n    paddingRight: 16,\n    alignContent: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#ffffff'\n  },\n  divider: {\n    height: 16\n  },\n  headline: {\n    fontSize: 30\n  },\n  appDesc: {\n    textAlign: 'center'\n  },\n  header: {\n    padding: 32\n  },\n  appTitle: {\n    textAlign: 'center',\n    fontSize: 35,\n    lineHeight: 35,\n    fontWeight: '700'\n  },\n  btn: {\n    height: 50,\n    paddingTop: 6\n  }\n});\nexport default Login;","map":{"version":3,"sources":["C:/Users/DCV/Documents/ReactNativeProjekt/EarthCrew/src/screens/auth/login/Login.js"],"names":["React","UserModel","Headline","Paragraph","TextInput","Button","Snackbar","Portal","Login","props","useState","identifier","setIdentifier","password","setPassword","visible","setVisible","loading","setLoading","error","setError","validateInput","errors","length","authenticateUser","user","login","message","styles","base","header","appTitle","appDesc","divider","text","btn","StyleSheet","create","flex","paddingLeft","paddingRight","alignContent","justifyContent","backgroundColor","height","headline","fontSize","textAlign","padding","lineHeight","fontWeight","paddingTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { View, StyleSheet, StatusBar } from 'react-native';\r\n\r\nimport UserModel from '../../../app/models/UserModel';\r\nimport { Headline, Paragraph, TextInput, Button, Snackbar, Portal } from 'react-native-paper';\r\n\r\nconst Login = props => {\r\n    const [identifier, setIdentifier] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n    const [visible, setVisible] = React.useState(false);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [error, setError] = React.useState(false);\r\n\r\n    const validateInput = () => {\r\n        let errors = false;\r\n\r\n        if (!identifier || identifier.length === 0) {\r\n            errors = true;\r\n        }\r\n\r\n        if (!password || password.length === 0) {\r\n            errors = true;\r\n        }\r\n\r\n        return !errors;\r\n    };\r\n\r\n    const authenticateUser = async () => {\r\n        if (validateInput()) {\r\n            setLoading(true);\r\n            const user = new UserModel(identifier, password);\r\n\r\n            try {\r\n                await user.login();\r\n            } catch (err) {\r\n                setError(err.message);\r\n                setVisible(true);\r\n                setLoading(false);\r\n            }\r\n        } else {\r\n            setError('Please fill out all *required fields');\r\n            setVisible(true);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <View style={styles.base}>\r\n            <>\r\n                <StatusBar backgroundColor=\"#ffffff\" barStyle=\"dark-content\" />\r\n            </>\r\n\r\n            <View style={styles.header}>\r\n                <Headline style={styles.appTitle}>EarthCrew</Headline>\r\n                <Paragraph style={styles.appDesc}>\r\n                    Authenticate with strapi to access the EarthCrew.\r\n                </Paragraph>\r\n            </View>\r\n\r\n            <>\r\n                <View style={styles.divider} />\r\n                <TextInput\r\n                    onChangeText={text => setIdentifier(text)}\r\n                    label=\"*Username or email\"\r\n                    placeholder=\"*Username or email\">\r\n                    {identifier}\r\n                </TextInput>\r\n            </>\r\n\r\n            <>\r\n                <View style={styles.divider} />\r\n                <TextInput\r\n                    onChangeText={text => setPassword(text)}\r\n                    label=\"*Password\"\r\n                    placeholder=\"*Password\"\r\n                    secureTextEntry>\r\n                    {password}\r\n                </TextInput>\r\n            </>\r\n\r\n            <>\r\n                <View style={styles.divider} />\r\n                <Button\r\n                    loading={loading}\r\n                    disabled={loading}\r\n                    style={styles.btn}\r\n                    onPress={() => authenticateUser()}\r\n                    mode=\"contained\">\r\n                    Login\r\n                </Button>\r\n                <View style={styles.divider} />\r\n                <View style={styles.divider} />\r\n            </>\r\n\r\n            <>\r\n                {/**\r\n             * We use a portal component to render\r\n             * the snackbar on top of everything else\r\n             * */}\r\n                <Portal>\r\n                    <Snackbar visible={visible} onDismiss={() => setVisible(false)}>\r\n                        {error}\r\n                    </Snackbar>\r\n                </Portal>\r\n            </>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    base: {\r\n        flex: 1,\r\n        paddingLeft: 16,\r\n        paddingRight: 16,\r\n        alignContent: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#ffffff',\r\n    },\r\n    divider: {\r\n        height: 16,\r\n    },\r\n    headline: {\r\n        fontSize: 30,\r\n    },\r\n    appDesc: {\r\n        textAlign: 'center',\r\n    },\r\n    header: {\r\n        padding: 32,\r\n    },\r\n    appTitle: {\r\n        textAlign: 'center',\r\n        fontSize: 35,\r\n        lineHeight: 35,\r\n        fontWeight: '700',\r\n    },\r\n    btn: {\r\n        height: 50,\r\n        paddingTop: 6,\r\n    },\r\n});\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}